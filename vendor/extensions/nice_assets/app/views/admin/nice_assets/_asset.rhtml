<%
def short_name(string)
	string.length > 16 ? "#{string[0..14]}&#8230;" : string
end

style = nil
if asset.class.to_s == 'NiceAsset'
  if asset.content_type =~ /svg/
    background_class = 'svg'
  elsif asset.content_type =~ /image/
    style = %{ style="background-image: url(#{asset.thumbnail_public_filename('100')});"}
  else
    background_class = asset.basic_content_type
  end
else
  background_class = 'web'
end
%>
<% if asset.class.to_s == 'NiceAsset' %>
	<span class="asset-image <%= background_class %>"<%= style %>></span>
	<small>
		<%= short_name(asset.filename) %>
		<br /><span class="title">
		<% if asset.title.length == 0 %>
			&#8212; no title &#8212;
		<% else %>
			<%= short_name(asset.title) %>
		<% end %>
		</span>
	</small>

	<span class="asset-button add-asset" title="<%= add_msg %>">&nbsp;</span>
	<span class="asset-button view-asset" title="View">&nbsp;</span>
	<span class="asset-button info-asset" title="Information">&nbsp;</span>
	<span class="asset-button destroy-asset" title="<%= delete_msg %>">&nbsp;</span>
	
	<input type="hidden" class="hidden" name="resource_type" value="<%= asset.class.to_s %>" />
	<input type="hidden" class="hidden" name="resource_id" value="<%= asset.id %>" />
	<input type="hidden" class="hidden" name="content_type" value="<%= asset.content_type %>" />
	<input type="hidden" class="hidden" name="url" value="<%= asset.public_filename
	%>" />
	<input type="hidden" class="hidden" name="dimensions" value="<%= asset.dimensions(300) %>" />
	<input type="hidden" class="hidden" name="text" value="<%= asset.title.empty? ? asset.filename : asset.title %>" />
	<input type="hidden" class="hidden" name="html_id" value="<%= asset_html_id %>" />
	
<% elsif asset.class.to_s == 'Page' %>
  <span class="asset-image <%= background_class %>"<%= style %>></span>
	<small><%= short_name(asset.title) %><br /><span class="title"><%= asset.status.name %></span></small>

	<span class="asset-button add-asset" title="Add a link to this page at the cursor position">&nbsp;</span>
	<span class="asset-button view-asset" title="View">&nbsp;</span>
	<span class="asset-button info-asset" title="Information">&nbsp;</span>
	<span class="asset-button destroy-asset" title="<%= delete_msg %>">&nbsp;</span>

	<input type="hidden" class="hidden" name="resource_type" value="<%= asset.class.to_s %>" />
	<input type="hidden" class="hidden" name="resource_id" value="<%= asset.id %>" />
	<input type="hidden" class="hidden" name="url" value="<%= asset.url %>" />
	<input type="hidden" class="hidden" name="text" value="<%= asset.title %>" />
	<input type="hidden" class="hidden" name="html_id" value="<%= asset_html_id %>" />

<% end %>
